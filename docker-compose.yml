# OAuth-LLM-Nexus Docker Compose Configuration
# 
# Quick Start:
#   docker-compose up -d
#
# With custom config:
#   docker-compose -f docker-compose.yml -f docker-compose.override.yml up -d

services:
  nexus:
    image: ghcr.io/pysugar/oauth-llm-nexus:latest
    # Or build locally:
    # build:
    #   context: .
    #   dockerfile: Dockerfile
    container_name: oauth-llm-nexus
    restart: unless-stopped
    ports:
      - "8086:8080"
    volumes:
      # Persist database to host directory
      - ~/.oauth-llm-nexus:/home/nexus
      
      # Optional: Map entire home directory for Config Inspector support
      # This allows the container to access your local IDE configs (.cursor/, .zed/, etc.)
      # Uncomment the line below and comment out the line above to enable:
      # - ~/:/home/nexus
      
      # Optional: Custom model routes
      # - ./config/model_routes.yaml:/etc/nexus/model_routes.yaml:ro
    environment:
      # Server Configuration
      - PORT=8080
      - HOST=0.0.0.0
      # Optional: Enable verbose logging
      # - NEXUS_VERBOSE=true
      # Optional: Set admin password for dashboard
      # - NEXUS_ADMIN_PASSWORD=your-secure-password
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:8080/"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 5s
